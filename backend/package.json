{
  "backend-dependencies": {
    "description": "Add these to backend/package.json dependencies",
    "packages": {
      "openai": "^4.28.0",
      "p-retry": "^6.2.0",
      "langdetect": "^0.2.1",
      "natural": "^6.10.0",
      "@types/natural": "^5.1.2",
      "tiktoken": "^1.0.10",
      "ml-distance": "^4.0.1",
      "compromise": "^14.10.0",
      "stopword": "^2.0.8",
      "keyword-extractor": "^0.0.25",
      "node-cache": "^5.1.2",
      "express-rate-limit": "^7.1.5",
      "@types/express-rate-limit": "^6.0.0"
    },
    "scripts": {
      "search:test": "jest --testPathPattern=search",
      "embeddings:generate": "ts-node scripts/generate-embeddings.ts",
      "search:analytics": "ts-node scripts/search-analytics.ts"
    }
  },
  "frontend-dependencies": {
    "description": "Add these to frontend/package.json dependencies",
    "packages": {
      "react-speech-kit": "^3.0.1",
      "@tanstack/react-query": "^5.17.0",
      "fuse.js": "^7.0.0",
      "react-highlight-words": "^0.20.0",
      "react-intersection-observer": "^9.5.3",
      "react-markdown": "^9.0.1",
      "remark-gfm": "^4.0.0",
      "react-syntax-highlighter": "^15.5.0",
      "@types/react-syntax-highlighter": "^15.5.11",
      "lodash.debounce": "^4.0.8",
      "@types/lodash.debounce": "^4.0.9",
      "react-hotkeys-hook": "^4.4.1",
      "cmdk": "^0.2.0",
      "sonner": "^1.3.1"
    }
  },
  "environment-variables": {
    "description": "Add these to .env file",
    "variables": {
      "OPENAI_API_KEY": "sk-...",
      "OPENAI_ORG_ID": "org-...",
      "OPENAI_MODEL_EMBEDDING": "text-embedding-3-small",
      "OPENAI_MODEL_CHAT": "gpt-4-turbo-preview",
      "OPENAI_MAX_TOKENS": "2000",
      "OPENAI_TEMPERATURE": "0.7",
      "SEARCH_MAX_RESULTS": "20",
      "SEARCH_MIN_SCORE": "0.7",
      "SEARCH_CACHE_TTL": "3600",
      "VOICE_MAX_DURATION": "30",
      "VOICE_SUPPORTED_LANGUAGES": "ar,en,de",
      "EMBEDDING_BATCH_SIZE": "100",
      "EMBEDDING_DIMENSIONS": "1536",
      "AI_RATE_LIMIT_PER_MINUTE": "10",
      "SEARCH_RATE_LIMIT_PER_MINUTE": "30"
    }
  },
  "docker-compose-additions": {
    "description": "Optional services to add to docker-compose.yml",
    "services": {
      "elasticsearch": {
        "image": "elasticsearch:8.11.0",
        "environment": [
          "discovery.type=single-node",
          "xpack.security.enabled=false",
          "ES_JAVA_OPTS=-Xms512m -Xmx512m"
        ],
        "ports": ["9200:9200"],
        "volumes": ["elasticsearch_data:/usr/share/elasticsearch/data"]
      },
      "kibana": {
        "image": "kibana:8.11.0",
        "environment": [
          "ELASTICSEARCH_HOSTS=http://elasticsearch:9200"
        ],
        "ports": ["5601:5601"],
        "depends_on": ["elasticsearch"]
      },
      "meilisearch": {
        "image": "getmeili/meilisearch:v1.5",
        "environment": [
          "MEILI_MASTER_KEY=masterKey",
          "MEILI_ENV=development"
        ],
        "ports": ["7700:7700"],
        "volumes": ["meilisearch_data:/meili_data"]
      }
    }
  },
  "installation-commands": {
    "backend": [
      "cd backend",
      "npm install openai p-retry langdetect natural @types/natural tiktoken ml-distance compromise stopword keyword-extractor node-cache express-rate-limit @types/express-rate-limit",
      "npx prisma migrate dev --name add_search_system",
      "npx prisma generate"
    ],
    "frontend": [
      "cd frontend",
      "npm install @tanstack/react-query fuse.js react-highlight-words react-intersection-observer react-markdown remark-gfm react-syntax-highlighter @types/react-syntax-highlighter lodash.debounce @types/lodash.debounce react-hotkeys-hook cmdk sonner",
      "npm install react-speech-kit --legacy-peer-deps"
    ],
    "database": [
      "docker exec -it postgres_container psql -U postgres -d wmlab -c 'CREATE EXTENSION IF NOT EXISTS vector;'",
      "docker exec -it postgres_container psql -U postgres -d wmlab -c 'CREATE EXTENSION IF NOT EXISTS pg_trgm;'"
    ]
  }
}